Salt Cloud:
	Post-acion:
		☐ Add DNS in OVH => use the external_pillar to fill the DNS is missing entries + additionnal domaine from pillar
		☐ Mount IPv6 => use the external_pillar "all_ips", and mount missing IPv6

Monitoring:
	☐ Wigo : Monitor backup, need a backup that is less than 48H (to put on all backuped server, auto-monitoring via wigo)
		* /usr/local/bin/borgwrapper -c /etc/borgwrapper/default exec list --lock-wait 30 --last 1 --json  | grep -v '^Loading' | jq '.archives[0].time' | xargs date +%s -d
		* date +%s
		* diff < 172800
	☐ filebeat: send log via filebeat to ELK (nginx, others...)
	☐ kibana: create dashboard from logs

Bastion:
	☐ monitoring docker access to bastion
	☐ if down -> restart docker ! (implement a beacon?)
	☐ Find a way to auto add host in bastion and group

Warden:
	☐ Automate install
		* curl (?) vs file deposit
	☐ AUtomate update (regular schedule)
		* updateself
		* update

srv002:
	hassio:
		☐ Automate installation
		☐ Automate update ?
	DNS management on local_dns:
		☐ Put local DNS in salt
			* https://github.com/saltstack-formulas/bind-formula

Saltstack (vps001):
	☐ Salt the salt :)

Archive:
  ✔ Automate wigo probes deployment with salt @done(19-12-03 11:38) @project(Monitoring)
  ✔ Automate the first borg-init using the borgwrapper (peut etre facilité par sshfp) @done(19-12-02 14:06) @project(Backup management)
  ✔ Passer en sshfp @done(19-12-02 12:57) @project(SSH)
  ✔ test if the DNS sshfp field exist @done(19-12-02 12:56) @project(SSH)
  ✔ bring back the key to the salt server `ssh-keygen -r {{ grains['host'] }}` @done(19-12-02 12:56) @project(SSH)
  ✘ reactor on master that modify DNS on OVH + DNS on srv002 @cancelled(19-12-02 12:56) @project(SSH)
  ✔ Modify SSHD Configuration: http://shaarli.guiguishow.info/?QWcOtQ @done(19-12-02 12:57) @project(SSH)
  ✔ Wigo : Monitoring local des containers docker (pas de docker en exited) @done(19-11-30 14:56) @project(Monitoring)
  ✔ Find a way to restart docker on nftables reload @critical @done(19-11-29 17:21) @project(Docker)
  ✔ Add roles on /etc/salt/grains (done via *.map for salt-cloud) @done(19-11-21 09:52) @project(Salt Cloud.Pre-action)
  ✔ Add Ip in nftables pillar @done(19-11-28 14:53) @project(Salt Cloud.Post-acion)
  ✔ Find an event to catch (salt/auth ?) and get IP or use mine @done(19-11-28 10:44) @project(Salt Cloud.Post-acion)
  ✔ Use those informations to generate the host-ips.jinja @done(19-11-28 10:44) @project(Salt Cloud.Post-acion)
  ✔ Add thoses ip in Wigo too @done(19-11-28 14:53) @project(Salt Cloud.Post-acion)
  ✔ mount vrack @done(19-11-21 09:55) @project(Salt Cloud.Post-acion)
  ✔ Set a default password @done(19-11-21 09:55) @project(Salt Cloud.applying)
  ✔ Add sudoers.d rules for user @done(19-11-21 09:56) @project(Salt Cloud.applying)
  ✔ manage /etc/hosts @done(19-11-21 09:56) @project(Salt Cloud.applying)
  ✔ Use borgbackup @done(19-11-22 11:10) @project(Backup management)
  ✔ Two roles BackupServer and BackupAgent (= not BackupServer) @done(19-11-22 11:10) @project(Backup management)
  ✔ Use event to propagate key (when installing borg on client) @done(19-11-22 11:11) @project(Backup management)
  ✔ Use reactor to catch event and push the new key on borg server @done(19-11-22 11:11) @project(Backup management)
  ✔ Monitoring ext. des sitewebs (all, portainer/koel/grafana/etc...) @done(19-11-29 11:04) @project(Monitoring)
  ✔ * choice : free saas @done(19-11-29 11:04) => freshping.io @project(Monitoring)
  ✘ choice : my own ping / curl testing host on wazuh with wigo ? @cancelled(19-11-29 16:45) @project(Monitoring)
  ✔ Mettre sous salt la partie webhook @done(19-11-21 09:59) @project(Saltstack (vps001))
  ✔ Mettre en place l'auto-deploy par webhook pour le git salt @done(19-11-21 09:59) @project(Saltstack (vps001))
  ✔ Faire marcher le salt-lint sur github action (check) @done(19-11-21 09:59) @project(Saltstack (vps001))
